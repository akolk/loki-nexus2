worker_processes 1;

events {
    worker_connections 1024;
}

http {
    # Admin Proxy
    server {
        listen 8081;

        location / {
            proxy_pass http://frontend:80;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;

            # Auth Headers
            proxy_set_header X-Forwarded-User "admin_user";
            proxy_set_header X-Forwarded-Email "admin@example.com";
            proxy_set_header X-Forwarded-Groups "admin";

            # Ensure headers pass through
            proxy_pass_request_headers on;
        }
    }

    # Data Scientist Proxy
    server {
        listen 8082;

        location / {
            proxy_pass http://frontend:80;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;

            # Auth Headers
            proxy_set_header X-Forwarded-User "data_scientist_1";
            proxy_set_header X-Forwarded-Email "ds@example.com";
            proxy_set_header X-Forwarded-Groups "datascientist";

            # Ensure headers pass through
            proxy_pass_request_headers on;
        }
    }

    # Beleidsmedewerker Proxy
    server {
        listen 8083;

        location / {
            proxy_pass http://frontend:80;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;

            # Auth Headers
            proxy_set_header X-Forwarded-User "beleids_user";
            proxy_set_header X-Forwarded-Email "beleid@example.com";
            proxy_set_header X-Forwarded-Groups "beleidsmedewerker";

            # Ensure headers pass through
            proxy_pass_request_headers on;
        }
    }

    # Management Proxy
    server {
        listen 8084;

        location / {
            proxy_pass http://frontend:80;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;

            # Auth Headers
            proxy_set_header X-Forwarded-User "manager_user";
            proxy_set_header X-Forwarded-Email "management@example.com";
            proxy_set_header X-Forwarded-Groups "management";

            # Ensure headers pass through
            proxy_pass_request_headers on;
        }
    }
}
